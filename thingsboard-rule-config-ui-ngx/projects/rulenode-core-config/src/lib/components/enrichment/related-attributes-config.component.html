<section [formGroup]="relatedAttributesConfigForm" fxLayout="column">
  <label translate class="tb-title tb-required">tb.rulenode.relations-query</label>
  <tb-relations-query-config
    required
    formControlName="relationsQuery"
    style="padding-bottom: 15px;">
  </tb-relations-query-config>
  <label translate class="tb-title tb-required">tb.rulenode.attr-mapping</label>
  <mat-checkbox fxFlex formControlName="telemetry" style="padding-bottom: 16px;">
    {{ 'tb.rulenode.latest-telemetry' | translate }}
  </mat-checkbox>
  <tb-kv-map-config
    required
    formControlName="attrMapping"
    requiredText="tb.rulenode.attr-mapping-required"
    keyText="{{ relatedAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.source-telemetry' : 'tb.rulenode.source-attribute' }}"
    keyRequiredText="{{ relatedAttributesConfigForm.get('telemetry').value ? 'tb.rulenode.source-telemetry-required' : 'tb.rulenode.source-attribute-required' }}"
    valText="tb.rulenode.target-attribute"
    valRequiredText="tb.rulenode.target-attribute-required"
    hintText="tb.rulenode.kv-map-pattern-hint">
  </tb-kv-map-config>
</section>
